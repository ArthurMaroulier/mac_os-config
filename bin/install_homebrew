#! /usr/bin/env bash

# DESCRIPTION
# Installs Homebrew software.

# EXECUTION

source "$MAC_OS_CONFIG_PATH/lib/settings.sh"

# Check if brew is installed
has_brew=$(command -v brew)

if [ -z "$has_brew" ] ; then
  ruby -e "$(curl --location --fail --silent --show-error https://raw.githubusercontent.com/Homebrew/install/master/install)"
  export PATH="/usr/local/bin:$PATH"
fi

has_brew=$(command -v brew)

# Install brew software
if [ ! -z "$has_brew" ] ; then
  # Tap used repo
  printf "Tap new repositories...\n"
  for tap_name in "${HOMEBREW_TAP[@]}"
  do
    eval "brew tap $tap_name"
  done

  printf "Install software from Homebrew...\n"
  for software in "${HOMEBREW_SOFTWARE[@]}"
  do
    eval "brew install $software"
  done
else
  printf "Homebrew can't be found, Homebrew software won't be installed.\n"
fi